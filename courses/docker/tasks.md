# Практические задания по Docker и Docker Compose

Выполнение работы нужно сохранить в своем Git-репозитории, с рекомендуемой структурой папок:

```bash
.
`-- courses
    `-- docker
        |-- task_1
        |-- task_2
        |-- task_3
        |-- task_4
        |-- task_5
        `-- task_6
```

## Задание 1: Создание и запуск контейнера

1. Создайте Dockerfile для простого веб-сервера Nginx. В рамках сборки образа нужно отредактировать стартовую страницу nginx (welcome page)
2. Соберите образ с именем `custom_nginx`.
3. Запустите контейнер из этого образа, пробросив порт 80 контейнера на порт 8080 хоста.
4. Проверьте, что приложение доступно по адресу `http://localhost:8080`.

---

## Задание 2: Работа с Docker Compose

1. Создайте `docker-compose.yml` файл, который будет запускать два сервиса:
   - Ubuntu.
   - Базу данных PostgreSQL.
2. Настройте сеть между контейнерами так, чтобы Ubuntu могло подключаться к PostgreSQL.
3. Запустите сервисы с помощью команды `docker-compose up`.
4. Подключитесь к терминалу Ubuntu контейнера и проверьте соединение с базой данных PostgreSQL

---

## Задание 3: Многоэтапная сборка

1. Создайте Dockerfile с многоэтапной сборкой для приложения на Go или Java.
2. На первом этапе соберите приложение.
3. На втором этапе скопируйте собранный бинарник в минимальный образ на основе `alpine`.
4. Соберите образ и запустите контейнер, чтобы убедиться, что приложение работает.

---

## Задание 4: Работа с томами

1. Создайте Dockerfile для приложения, которое записывает логи в файл, например Nginx.
2. Используйте Docker Compose для запуска контейнера с этим приложением и подключите том для хранения логов на хосте.
3. Проверьте, что логи записываются в указанный том на хосте.

---

## Задание 5: Настройка окружения

1. Создайте Dockerfile для приложения, которое использует переменные окружения для настройки (например, порт, на котором оно запускается), например **PostgreSQL**.
2. Используйте Docker Compose для запуска контейнера с этим приложением и передайте переменные окружения через `environment` в `docker-compose.yml`.
3. Проверьте, что приложение использует переданные переменные окружения.

---

## Задание 6: Масштабирование сервисов

1. Создайте `docker-compose.yml` файл для запуска нескольких экземпляров веб-приложения на Flask и балансировщика нагрузки (например, Nginx).
2. Настройте Nginx так, чтобы он распределял нагрузку между экземплярами Flask-приложения.
3. Запустите сервисы с помощью `docker-compose up --scale web=3` (где `web` - это имя сервиса Flask-приложения).
4. Проверьте, что запросы распределяются между несколькими экземплярами приложения.

    [Пример Flask приложения для использования](https://github.com/mmumshad/simple-webapp-flask)

---